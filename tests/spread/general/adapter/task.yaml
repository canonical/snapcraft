summary: Build a snap that tests adapter settings

# This test snap uses core18
systems: [ubuntu-18*]

environment:
  SNAP_DIR: snaps/adapter-tests

restore: |
  cd "$SNAP_DIR"
  snapcraft clean
  rm -f ./*.snap

execute: |
  cd "$SNAP_DIR"
  snapcraft prime

  expected_snap_yaml="$PWD/../../expected_snap.yaml"

  if ! diff -U10 prime/meta/snap.yaml "$expected_snap_yaml"; then
      echo "The formatting for snap.yaml is incorrect"
      exit 1
  fi
